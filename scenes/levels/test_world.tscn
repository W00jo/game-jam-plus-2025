[gd_scene load_steps=13 format=3 uid="uid://dy4q4lk1onlnd"]

[ext_resource type="PackedScene" uid="uid://batnu0uma6vhk" path="res://scenes/npcs/fake_npc/gostek.tscn" id="1_7c366"]
[ext_resource type="Script" path="res://scenes/levels/viewport_container_player_1.gd" id="2_ho4vq"]
[ext_resource type="PackedScene" uid="uid://dwullwuqebjtc" path="res://scenes/players/player1/player.tscn" id="3_dubqp"]
[ext_resource type="PackedScene" uid="uid://dmrwwjnwxvabd" path="res://scenes/ui/hud/hud.tscn" id="4_35d48"]
[ext_resource type="PackedScene" uid="uid://8kdpemwib222" path="res://scenes/players/player2/player_2.tscn" id="5_m2j1u"]
[ext_resource type="PackedScene" uid="uid://cendlct4ehhly" path="res://scenes/enviroment/landmine/landmine.tscn" id="6_k4tkr"]
[ext_resource type="PackedScene" uid="uid://bft4ip0s201gd" path="res://scenes/enviroment/collectible/collectible.tscn" id="7_junah"]
[ext_resource type="PackedScene" uid="uid://14ts8ibs7115" path="res://scenes/ui/menu/pause_menu.tscn" id="8_kqya4"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_xqnsq"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_tsias"]
sky_material = SubResource("ProceduralSkyMaterial_xqnsq")

[sub_resource type="Environment" id="Environment_7k8c1"]
background_mode = 2
sky = SubResource("Sky_tsias")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_0lift"]
vertices = PackedVector3Array(10.75, 0.4995, -13.75, 10.5, 0.4995, -14.75, -15.5, 0.4995, -15.5, -15.5, 0.4995, 15.5, 15.5, 0.4995, 15.5, 11.5, 0.4995, -15, 15.5, 0.4995, -15.5, 11.75, 0.4995, -14)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 4), PackedInt32Array(5, 1, 2), PackedInt32Array(5, 2, 6), PackedInt32Array(7, 5, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(0, 7, 4)]
agent_radius = 0.4

[node name="TestWorld" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_7k8c1")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_0lift")

[node name="CSGBox3D" type="CSGBox3D" parent="NavigationRegion3D"]
use_collision = true
collision_layer = 2
size = Vector3(32, 0.001, 32)

[node name="Gostek" parent="NavigationRegion3D" instance=ExtResource("1_7c366")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.072009, 1.2014427, -14.306542)
player_path = NodePath("../../GridContainer/Viewport_container_player2/Viewport_player2/Player2")

[node name="Skeleton3D" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002" index="0"]
bones/1/rotation = Quaternion(0.001487352, 0.04783818, -0.014669579, 0.9987463)
bones/2/rotation = Quaternion(0.0054114508, 0.013467793, -0.0008245628, 0.9998943)
bones/3/rotation = Quaternion(0.005418941, 0.013442122, -0.0009023192, 0.9998946)
bones/4/rotation = Quaternion(0.036855265, -0.0009120364, 0.0049715247, 0.9993079)
bones/5/rotation = Quaternion(-0.027654912, 0.029875543, -0.03334196, 0.9986146)
bones/7/rotation = Quaternion(-0.5961216, -0.3876712, 0.5976132, -0.37041664)
bones/8/rotation = Quaternion(0.47066307, 0.07173299, -0.06512868, 0.8769771)
bones/9/rotation = Quaternion(0.009148608, 0.00060814054, 0.069975324, 0.9975066)
bones/10/rotation = Quaternion(0.011260594, 0.96523035, 0.017997028, -0.2605373)
bones/12/rotation = Quaternion(-0.15780303, -0.004358973, 0.5300557, 0.8331387)
bones/13/rotation = Quaternion(0.22888163, -0.07442728, -0.15643646, 0.9579152)
bones/15/rotation = Quaternion(-0.22528711, -0.13225107, -0.09479495, 0.96060884)
bones/16/rotation = Quaternion(-0.2516069, -0.00994197, 0.037133437, 0.9670659)
bones/17/rotation = Quaternion(-0.1407096, 0.00818501, -0.0019827215, 0.9900151)
bones/19/rotation = Quaternion(0.5939311, -0.3930112, 0.59097636, 0.37886018)
bones/20/rotation = Quaternion(0.3915215, -0.024449369, -0.099950016, 0.91439766)
bones/21/rotation = Quaternion(0.022539115, -0.0006187717, -0.17286776, 0.98468703)
bones/22/rotation = Quaternion(0.05781207, 0.90096766, -0.048336916, 0.4272921)
bones/24/rotation = Quaternion(-0.18353595, 0.014894644, -0.5168059, 0.83606493)
bones/25/rotation = Quaternion(0.200584, -0.015410338, 0.04580577, 0.97848374)
bones/27/rotation = Quaternion(-0.16914134, 0.068605386, 0.07610027, 0.98025167)
bones/28/rotation = Quaternion(-0.30645275, -0.00991293, 0.2134369, 0.9275953)
bones/29/rotation = Quaternion(-0.13895789, 0.008662982, 0.098269776, 0.9853724)
bones/31/rotation = Quaternion(0.033533543, 0.26139668, 0.9645397, 0.014511782)
bones/32/rotation = Quaternion(-0.2641169, -0.0680791, -0.0024144887, 0.962082)
bones/33/rotation = Quaternion(0.42441168, 0.07595892, -0.023969887, 0.90195924)
bones/34/rotation = Quaternion(0.32984775, 0.07570584, -0.02550035, 0.94064814)
bones/36/rotation = Quaternion(-0.10819798, -0.02948361, 0.9924432, 0.04980533)
bones/37/rotation = Quaternion(-0.15467234, -0.027153263, 0.021705281, 0.9873541)
bones/38/rotation = Quaternion(0.5708997, -0.076241344, 0.023708321, 0.81712836)
bones/39/rotation = Quaternion(0.33214742, -0.07574286, 0.025080238, 0.9398469)

[node name="Head" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="2"]
transform = Transform3D(0.9741818, 0.09230015, 0.20603547, -0.20960052, 0.030652191, 0.9773065, 0.083890095, -0.99525917, 0.049206976, 1.0586445, 0.5679898, -82.920425)

[node name="Torso" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="3"]
transform = Transform3D(0.9949926, 0.029444678, 0.09551276, -0.095600046, 0.0015674423, 0.99541855, 0.029160071, -0.9995651, 0.004374506, 0, -1.1473308, -55.17752)

[node name="LeftArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="4"]
transform = Transform3D(-0.11504268, 0.08035067, -0.99010533, -0.96529907, -0.24427684, 0.09233652, -0.23444057, 0.9663705, 0.10566455, 10.687257, -2.6964445, -72.98063)

[node name="LeftForeArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="5"]
transform = Transform3D(-0.102764435, 0.077453926, -0.99168533, -0.9899431, -0.10540393, 0.09435157, -0.097219676, 0.9914081, 0.08750662, 12.023406, -6.7585235, -56.910854)

[node name="LeftHand" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="6"]
transform = Transform3D(-0.4094325, 0.045551624, 0.9112022, 0.9014883, -0.13338749, 0.41173574, 0.14029822, 0.9900159, 0.0135490745, 13.678677, -9.011116, -35.723442)

[node name="RightArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="7"]
transform = Transform3D(0.31081417, -0.33389837, 0.8898915, 0.94850034, 0.16921778, -0.2677921, -0.06117007, 0.9272957, 0.3692978, -9.652758, 0.39484972, -73.79173)

[node name="RightForeArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="8"]
transform = Transform3D(0.40006953, -0.16810706, 0.9009355, 0.83595794, 0.46987042, -0.28354192, -0.37565732, 0.86658055, 0.32851115, -15.200928, 3.2066295, -58.383465)

[node name="RightHand" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="9"]
transform = Transform3D(-0.96058846, -0.14195555, -0.23899639, -0.27567685, 0.59683836, 0.7535161, 0.03567639, 0.7897041, -0.61244977, -18.792074, 13.24412, -39.87137)

[node name="LeftUpLeg" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="10"]
transform = Transform3D(-0.99732995, -0.010463264, 0.07227553, 0.057102207, 0.50522816, 0.8610946, -0.04552549, 0.86292243, -0.5032816, 5.9848366, -0.46329382, -46.648655)

[node name="LeftLeg" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="11"]
transform = Transform3D(-0.9788414, -0.08620944, 0.18557467, 0.18629153, -0.00027492642, 0.98249453, -0.0846493, 0.99627686, 0.016329259, 5.6801023, 14.251069, -21.516735)

[node name="LeftFoot" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="12"]
transform = Transform3D(-0.99745584, -0.01908873, 0.06868728, 0.029306844, 0.76851493, 0.63916016, -0.064988025, 0.6395469, -0.7659998, 3.1099322, 14.242872, 8.185368)

[node name="BoneAttachment3D4" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="13"]
transform = Transform3D(-0.9716252, -0.09247776, -0.21769753, -0.21182379, -0.06929927, 0.97484785, -0.10523804, 0.9933002, 0.047743935, -5.9848366, -0.35910308, -46.648655)

[node name="BoneAttachment3D5" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="14"]
transform = Transform3D(-0.98422873, 0.012266748, -0.17647487, -0.16913867, -0.35751787, 0.9184625, -0.051826388, 0.9338256, 0.35395414, -8.678212, -2.3774147, -17.71921)

[node name="BoneAttachment3D6" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="15"]
transform = Transform3D(-0.9990382, -0.03594184, 0.025112852, -0.010410219, 0.7508125, 0.66043353, -0.042592235, 0.6595369, -0.7504642, -8.312433, -13.0381365, 10.1262665)

[node name="AnimationTree" parent="NavigationRegion3D/Gostek" index="3"]
active = false

[node name="GridContainer" type="GridContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
columns = 2

[node name="Viewport_container_player1" type="SubViewportContainer" parent="GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true
script = ExtResource("2_ho4vq")

[node name="Viewport_player1" type="SubViewport" parent="GridContainer/Viewport_container_player1"]
handle_input_locally = false
size = Vector2i(574, 648)
render_target_update_mode = 4

[node name="Player1" parent="GridContainer/Viewport_container_player1/Viewport_player1" instance=ExtResource("3_dubqp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.4905853, 1.4881334, -9.479806)

[node name="HUD" parent="GridContainer/Viewport_container_player1/Viewport_player1" instance=ExtResource("4_35d48")]

[node name="Viewport_container_player2" type="SubViewportContainer" parent="GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true

[node name="Viewport_player2" type="SubViewport" parent="GridContainer/Viewport_container_player2"]
handle_input_locally = false
size = Vector2i(574, 648)
render_target_update_mode = 4

[node name="Player2" parent="GridContainer/Viewport_container_player2/Viewport_player2" instance=ExtResource("5_m2j1u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.4905853, 1.6713071, -1.6846259)

[node name="HUD" parent="GridContainer/Viewport_container_player2/Viewport_player2" instance=ExtResource("4_35d48")]
player_hud_type = 1

[node name="LandMine" parent="." instance=ExtResource("6_k4tkr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13, 0.5048461, -4)

[node name="Collectibles" type="Node3D" parent="."]

[node name="Collectible" parent="Collectibles" instance=ExtResource("7_junah")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.757, 1.2, -4.916)

[node name="Collectible2" parent="Collectibles" instance=ExtResource("7_junah")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.9259977, 1.2, -4.916)

[node name="PauseMenu" parent="." instance=ExtResource("8_kqya4")]
visible = false

[connection signal="enemy_hit" from="NavigationRegion3D/Gostek" to="GridContainer/Viewport_container_player1/Viewport_player1/HUD" method="_on_enemy_hit"]
[connection signal="player_hit" from="GridContainer/Viewport_container_player2/Viewport_player2/Player2" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_player_2_player_hit"]
[connection signal="body_entered" from="Collectibles/Collectible" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_collectible_body_entered"]
[connection signal="body_entered" from="Collectibles/Collectible2" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_collectible_body_entered"]

[editable path="NavigationRegion3D/Gostek"]
[editable path="NavigationRegion3D/Gostek/MonsterAnimation"]
