[gd_scene load_steps=14 format=3 uid="uid://dy4q4lk1onlnd"]

[ext_resource type="PackedScene" uid="uid://batnu0uma6vhk" path="res://scenes/npcs/fake_npc/gostek.tscn" id="1_7c366"]
[ext_resource type="Script" uid="uid://bbmyu72cy2f4r" path="res://scenes/levels/viewport_container_player_1.gd" id="2_ho4vq"]
[ext_resource type="PackedScene" uid="uid://dwullwuqebjtc" path="res://scenes/players/player1/player.tscn" id="3_dubqp"]
[ext_resource type="PackedScene" uid="uid://dmrwwjnwxvabd" path="res://scenes/ui/hud/hud.tscn" id="4_35d48"]
[ext_resource type="PackedScene" uid="uid://bhw4djmtivvo2" path="res://scenes/npcs/citizen/citizen.tscn" id="4_ho4vq"]
[ext_resource type="PackedScene" uid="uid://8kdpemwib222" path="res://scenes/players/player2/player_2.tscn" id="5_m2j1u"]
[ext_resource type="PackedScene" uid="uid://cendlct4ehhly" path="res://scenes/enviroment/landmine/landmine.tscn" id="6_k4tkr"]
[ext_resource type="PackedScene" uid="uid://bft4ip0s201gd" path="res://scenes/enviroment/collectible/collectible.tscn" id="7_junah"]
[ext_resource type="PackedScene" uid="uid://14ts8ibs7115" path="res://scenes/ui/menu/pause_menu.tscn" id="8_kqya4"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_xqnsq"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_tsias"]
sky_material = SubResource("ProceduralSkyMaterial_xqnsq")

[sub_resource type="Environment" id="Environment_7k8c1"]
background_mode = 2
sky = SubResource("Sky_tsias")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_0lift"]
vertices = PackedVector3Array(-6, 0.4995, -14, -5.25, 0.4995, -14.25, -5.25, 0.4995, -15.5, -15.5, 0.4995, -15.5, -5.25, 0.4995, -10.25, -5.25, 0.4995, -13, -6, 0.4995, -13.25, -6.25, 0.4995, -10, -15.5, 0.4995, -5.75, -6.25, 0.4995, -6.25, -5.75, 0.4995, -6, -4.75, 0.4995, -14, -4.75, 0.4995, -13.25, -2.25, 0.4995, -10, 15.5, 0.4995, -15.5, 11.5, 0.4995, -15, 10.75, 0.4995, -13.75, 10.5, 0.4995, -14.75, 11.75, 0.4995, -14, -2.25, 0.4995, -6.25, -4.5, 0.4995, 15.5, 15.5, 0.4995, 15.5, -4.5, 0.4995, -6, -5.25, 5.2495, -9.25, -5.25, 5.2495, -7, -3.25, 5.2495, -7, -3.25, 5.2495, -9.25, -5, 0.4995, -9, -5, 0.4995, -7.25, -3.5, 0.4995, -7.25, -3.5, 0.4995, -9, -15.5, 0.4995, 15.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(7, 9, 8), PackedInt32Array(6, 7, 0), PackedInt32Array(0, 7, 3), PackedInt32Array(3, 7, 8), PackedInt32Array(9, 10, 8), PackedInt32Array(11, 1, 2), PackedInt32Array(5, 12, 4), PackedInt32Array(4, 12, 13), PackedInt32Array(15, 2, 14), PackedInt32Array(13, 12, 11), PackedInt32Array(11, 2, 13), PackedInt32Array(13, 2, 17), PackedInt32Array(13, 17, 16), PackedInt32Array(18, 15, 14), PackedInt32Array(16, 18, 13), PackedInt32Array(13, 18, 19), PackedInt32Array(18, 14, 19), PackedInt32Array(19, 14, 20), PackedInt32Array(20, 14, 21), PackedInt32Array(20, 22, 19), PackedInt32Array(15, 17, 2), PackedInt32Array(26, 25, 23), PackedInt32Array(23, 25, 24), PackedInt32Array(30, 29, 27), PackedInt32Array(27, 29, 28), PackedInt32Array(10, 22, 8), PackedInt32Array(8, 22, 31), PackedInt32Array(31, 22, 20)]
agent_radius = 0.4

[node name="TestWorld" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_7k8c1")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_0lift")

[node name="CSGBox3D" type="CSGBox3D" parent="NavigationRegion3D"]
use_collision = true
collision_layer = 2
size = Vector3(32, 0.001, 32)

[node name="Gostek" parent="NavigationRegion3D" instance=ExtResource("1_7c366")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.072009, 1.2014427, -14.306542)
player_path = NodePath("../../GridContainer/Viewport_container_player2/Viewport_player2/Player2")

[node name="Skeleton3D" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002" index="0"]
bones/1/rotation = Quaternion(-0.04579941, -0.0024540187, 0.0020400404, 0.99894553)
bones/2/rotation = Quaternion(0.0012047235, -0.023073388, 0.004300752, 0.9997238)
bones/3/rotation = Quaternion(0.0010001747, -0.023008404, 0.0044300198, 0.999725)
bones/4/rotation = Quaternion(0.018873977, 0.020384232, -0.021123268, 0.9993909)
bones/5/rotation = Quaternion(0.05033195, 0.0021024193, 0.017135924, 0.9985833)
bones/7/rotation = Quaternion(-0.45494217, -0.53238285, 0.5304092, -0.47776788)
bones/8/rotation = Quaternion(0.5912301, 0.08982686, 0.009675351, 0.80142665)
bones/9/rotation = Quaternion(0.034456685, 0.0005877242, 0.2635551, 0.9640286)
bones/10/rotation = Quaternion(0.10639749, 0.9229514, 0.107160546, -0.35405803)
bones/11/rotation = Quaternion(-0.04835837, -0.12997177, -0.44029906, 0.8870771)
bones/12/rotation = Quaternion(-0.050071638, 0.005439395, 0.49076167, 0.869837)
bones/13/rotation = Quaternion(0.014590056, -0.01655255, -0.022756636, 0.99949753)
bones/15/rotation = Quaternion(-0.18583898, -0.12281126, -0.08704077, 0.97098154)
bones/16/rotation = Quaternion(-0.2245589, -0.009431254, 0.043553054, 0.97344106)
bones/17/rotation = Quaternion(-0.060915925, 0.004580172, 0.004789154, 0.9981209)
bones/19/rotation = Quaternion(0.46856025, -0.52655655, 0.508516, 0.4945716)
bones/20/rotation = Quaternion(0.5793008, -0.120320074, -0.12205455, 0.7968916)
bones/21/rotation = Quaternion(0.029112484, -0.0006123656, -0.22328344, 0.97431856)
bones/22/rotation = Quaternion(-0.11615824, 0.8982464, 0.035733555, 0.42235506)
bones/23/rotation = Quaternion(-0.12137617, 0.009211159, 0.379522, 0.9171402)
bones/24/rotation = Quaternion(-0.036820695, -0.020538265, -0.33092192, 0.9427158)
bones/25/rotation = Quaternion(0.023479559, 0.023200803, -0.011145153, 0.9993929)
bones/27/rotation = Quaternion(-0.10855174, 0.061114278, -0.0030773107, 0.9922057)
bones/28/rotation = Quaternion(-0.2586563, -0.009141482, 0.17265163, 0.95037085)
bones/29/rotation = Quaternion(-0.061952624, 0.00600819, 0.049977623, 0.99680895)
bones/31/rotation = Quaternion(0.06498924, 0.05279398, 0.99552184, -0.043880664)
bones/32/rotation = Quaternion(-0.14958921, -0.0740311, 0.008811034, 0.98593354)
bones/33/rotation = Quaternion(0.5034352, 0.038921066, -0.08470877, 0.85898936)
bones/34/rotation = Quaternion(0.33172515, 0.07606398, -0.025256872, 0.9399653)
bones/36/rotation = Quaternion(-0.09601139, 0.09808813, 0.99001426, 0.032130938)
bones/37/rotation = Quaternion(-0.2085501, 0.049883246, -0.004715261, 0.97672737)
bones/38/rotation = Quaternion(0.52455646, -0.03489164, 0.029017184, 0.85016537)
bones/39/rotation = Quaternion(0.326683, -0.07470198, 0.025782967, 0.9418243)

[node name="Head" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="2"]
transform = Transform3D(0.9984103, -0.021982832, -0.051900763, 0.052973527, 0.051410552, 0.9972716, -0.019254604, -0.9984356, 0.052493334, -0.24054188, -2.5200806, -82.99886)

[node name="Torso" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="3"]
transform = Transform3D(0.9999796, -0.0038509932, -0.0050897268, 0.004715997, -0.09151224, 0.99579275, -0.004300564, -0.99579644, -0.09149221, 0, -1.1473308, -55.17752)

[node name="LeftArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="4"]
transform = Transform3D(0.08381433, 0.3406054, -0.9364629, -0.9961011, 0.0026841834, -0.08817571, -0.027519472, 0.94020206, 0.3395025, 10.658174, -3.0436203, -76.765175)

[node name="LeftForeArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="5"]
transform = Transform3D(0.22931547, 0.18738851, -0.95514363, -0.8578569, 0.50254726, -0.107364155, 0.45988628, 0.8439968, 0.27599454, 16.322098, -2.9989848, -61.130554)

[node name="LeftHand" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="6"]
transform = Transform3D(-0.790068, 0.124307714, 0.6002825, 0.6113062, 0.2329002, 0.7563473, -0.045786187, 0.96452236, -0.25999737, 20.326778, 7.74097, -43.093475)

[node name="RightArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="7"]
transform = Transform3D(0.16945215, -0.32607862, 0.9300317, 0.9849329, 0.08910997, -0.14821234, -0.034546345, 0.9411336, 0.33626536, -11.102903, -4.7366695, -76.29967)

[node name="RightForeArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="8"]
transform = Transform3D(0.28346238, -0.16627526, 0.94445854, 0.8496986, 0.50013274, -0.1669719, -0.44459128, 0.84983534, 0.28305262, -16.52114, -3.2559867, -60.66146)

[node name="RightHand" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="9"]
transform = Transform3D(-0.86945957, -0.2611127, -0.41935724, -0.48481694, 0.28806308, 0.8258161, -0.09482977, 0.9213252, -0.377051, -20.073154, 7.427978, -42.50705)

[node name="LeftUpLeg" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="10"]
transform = Transform3D(-0.987702, 0.0942304, 0.12476314, 0.13402969, 0.099411584, 0.98597836, 0.08050624, 0.9905746, -0.11081866, 5.9848366, -0.46329382, -46.648655)

[node name="LeftLeg" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="11"]
transform = Transform3D(-0.9551142, 0.048318833, 0.29227203, 0.2778023, -0.19653329, 0.94031936, 0.10287635, 0.9793058, 0.17428866, 8.729221, 2.431989, -17.798965)

[node name="LeftFoot" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="12"]
transform = Transform3D(-0.9881227, 0.09756389, 0.118724614, 0.15079758, 0.7642965, 0.6269854, -0.02956962, 0.63744175, -0.76993066, 10.169756, -3.4272778, 11.397177)

[node name="BoneAttachment3D4" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="13"]
transform = Transform3D(-0.97949886, -0.08245532, -0.18380195, -0.19640863, 0.1880474, 0.96232104, -0.044785015, 0.97869253, -0.20038714, -5.9848366, -0.35910308, -46.648655)

[node name="BoneAttachment3D5" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="14"]
transform = Transform3D(-0.95455664, 0.011044495, -0.2978253, -0.29294756, -0.21853681, 0.9308188, -0.05480537, 0.97576606, 0.21184117, -8.3863125, 5.1176972, -18.144651)

[node name="BoneAttachment3D6" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="15"]
transform = Transform3D(-0.9772199, -0.1780467, -0.115501985, -0.21096441, 0.7556038, 0.6201266, -0.023137769, 0.63036674, -0.7759523, -8.056979, -1.3987885, 10.951435)

[node name="Citizen" parent="NavigationRegion3D" instance=ExtResource("4_ho4vq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.402817, 1.4587977, -13.740158)

[node name="CSGBox3D3" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.4371958, 0.43066406, 4.4706244)
use_collision = true
collision_layer = 2
size = Vector3(2.819336, 1.8613281, 2.4384766)

[node name="GridContainer" type="GridContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
columns = 2

[node name="Viewport_container_player1" type="SubViewportContainer" parent="GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true
script = ExtResource("2_ho4vq")

[node name="Viewport_player1" type="SubViewport" parent="GridContainer/Viewport_container_player1"]
handle_input_locally = false
size = Vector2i(574, 648)
render_target_update_mode = 4

[node name="Player1" parent="GridContainer/Viewport_container_player1/Viewport_player1" instance=ExtResource("3_dubqp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.4905853, 1.4881334, -9.479806)

[node name="player_shooter" parent="GridContainer/Viewport_container_player1/Viewport_player1/Player1" index="0"]
transform = Transform3D(-0.4, 0, -6.039832e-08, 0, 0.4, 0, 6.039832e-08, 0, -0.4, 0, 0.039340854, -0.5550003)

[node name="Skeleton3D" parent="GridContainer/Viewport_container_player1/Viewport_player1/Player1/player_shooter/Armature" index="0"]
bones/0/position = Vector3(0.23736954, 0.49406695, 27.062729)
bones/0/rotation = Quaternion(-0.70710677, 0, 0, 0.70710677)
bones/1/position = Vector3(1.4901161e-08, 12.865718, -0.4851441)
bones/1/rotation = Quaternion(-0.0188441, 0, 0, 0.99982244)
bones/2/position = Vector3(0, 15.020668, 5.401671e-08)
bones/2/rotation = Quaternion(0, 0, 0, 1)
bones/3/position = Vector3(-1.4901161e-08, 17.166487, 5.9604645e-08)
bones/3/rotation = Quaternion(8.381904e-09, 0, 0, 1)
bones/4/position = Vector3(-1.4901161e-08, 19.312288, 5.9604645e-08)
bones/4/rotation = Quaternion(0.018844089, 0, 0, 0.99982244)
bones/5/position = Vector3(1.4901161e-08, 18.201683, -0.6913489)
bones/5/rotation = Quaternion(1.9274182e-09, 0, 0, 1)
bones/6/position = Vector3(1.4901161e-08, 61.804565, -2.3475044)
bones/7/position = Vector3(12.499369, 19.086472, 0.026146948)
bones/7/rotation = Quaternion(0.51297694, 0.48712274, -0.51214916, 0.48710302)
bones/8/position = Vector3(-6.3329935e-08, 25.627813, 7.450581e-09)
bones/8/rotation = Quaternion(0.22685868, 0.07617154, -0.017800286, 0.9707812)
bones/9/position = Vector3(2.9802322e-08, 18.2046, 4.172325e-06)
bones/9/rotation = Quaternion(-0.19048749, -0.67390305, 0.19416869, 0.6869263)
bones/10/position = Vector3(-2.5629997e-06, 33.19635, 8.34465e-07)
bones/10/rotation = Quaternion(0.1888941, 0.003105099, 0.016140297, 0.9818599)
bones/11/position = Vector3(1.9297004e-06, 6.7882547, -1.7881393e-07)
bones/11/rotation = Quaternion(0.009464893, 0.95929533, -0.28038234, 0.03238281)
bones/12/position = Vector3(-2.719462e-06, 8.855082, 1.1920929e-06)
bones/12/rotation = Quaternion(-4.0745352e-10, 2.095476e-08, -7.613562e-08, 1)
bones/13/position = Vector3(-1.6073358, 13.037425, -2.2261996)
bones/13/rotation = Quaternion(4.481991e-09, -4.1909516e-09, 2.817251e-08, 1)
bones/14/position = Vector3(0.6229526, 7.723935, -1.7064793)
bones/15/position = Vector3(-12.499369, 19.089083, -0.0430786)
bones/15/rotation = Quaternion(0.5115189, -0.48847142, 0.51350546, 0.48585626)
bones/16/position = Vector3(3.2782555e-07, 25.627811, 3.97861e-06)
bones/16/rotation = Quaternion(0.22640894, -0.060483914, 0.014087825, 0.97205055)
bones/17/position = Vector3(-6.7055225e-08, 18.196535, 3.516674e-06)
bones/17/rotation = Quaternion(-0.18804559, 0.66622514, -0.19603121, 0.6945176)
bones/18/position = Vector3(3.427267e-07, 33.19918, -2.3841858e-07)
bones/18/rotation = Quaternion(0.1091275, -0.002301274, -0.02095682, 0.99380416)
bones/19/position = Vector3(-1.8626451e-07, 9.575456, -1.7881393e-07)
bones/19/rotation = Quaternion(-0.19499758, -0.009751241, 0.04898343, 0.9795312)
bones/20/position = Vector3(-5.9604645e-07, 8.095271, 3.5762787e-07)
bones/20/rotation = Quaternion(-9.924406e-09, 1.4959369e-08, -4.5634806e-08, 1)
bones/21/position = Vector3(-0.9632362, 11.672995, 2.4296088)
bones/21/rotation = Quaternion(2.910383e-09, 2.4097972e-08, 7.962808e-08, 1)
bones/22/position = Vector3(0.36699957, 6.3664684, 2.1806312)
bones/23/rotation = Quaternion(-0.00012833865, -0.0034032902, 0.9992759, -0.03789565)
bones/24/position = Vector3(-1.3883691e-06, 48.20243, -3.88809e-08)
bones/24/rotation = Quaternion(0.023691954, -0.0004642185, -0.019652681, 0.999526)
bones/25/position = Vector3(-1.8569408e-06, 47.806236, -1.8253922e-07)
bones/25/rotation = Quaternion(0.33837596, 0.25434756, -0.09552717, 0.9009348)
bones/26/position = Vector3(-5.722046e-06, 25.23705, 9.536743e-07)
bones/26/rotation = Quaternion(0.41340458, -0.12471163, 0.05727468, 0.90014625)
bones/27/position = Vector3(-3.8146973e-06, 10.201346, -4.184246e-05)
bones/28/rotation = Quaternion(0.00026764264, -0.007091044, 0.9992567, 0.037891988)
bones/29/position = Vector3(-1.3434328e-07, 48.20615, -5.273978e-08)
bones/29/rotation = Quaternion(0.03592535, 0.00070253405, 0.019631395, 0.9991614)
bones/30/position = Vector3(-9.797513e-07, 47.8462, -9.872019e-07)
bones/30/rotation = Quaternion(0.32998452, -0.2613867, 0.09562087, 0.90202206)
bones/31/position = Vector3(-9.536743e-07, 25.171446, -1.2874603e-05)
bones/31/rotation = Quaternion(0.41435564, 0.1406045, -0.06496073, 0.89683884)
bones/32/position = Vector3(-4.7683716e-06, 10.606727, 2.7418137e-05)

[node name="HUD" parent="GridContainer/Viewport_container_player1/Viewport_player1" instance=ExtResource("4_35d48")]

[node name="Viewport_container_player2" type="SubViewportContainer" parent="GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true

[node name="Viewport_player2" type="SubViewport" parent="GridContainer/Viewport_container_player2"]
handle_input_locally = false
size = Vector2i(574, 648)
render_target_update_mode = 4

[node name="Player2" parent="GridContainer/Viewport_container_player2/Viewport_player2" instance=ExtResource("5_m2j1u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.9127426, 1.4844105, 4.693651)

[node name="HUD" parent="GridContainer/Viewport_container_player2/Viewport_player2" instance=ExtResource("4_35d48")]
player_hud_type = 1

[node name="LandMine" parent="." instance=ExtResource("6_k4tkr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13, 0.5048461, -4)

[node name="Collectibles" type="Node3D" parent="."]

[node name="Collectible" parent="Collectibles" instance=ExtResource("7_junah")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.757, 1.2, -4.916)

[node name="Collectible2" parent="Collectibles" instance=ExtResource("7_junah")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.9259977, 1.2, -4.916)

[node name="PauseMenu" parent="." instance=ExtResource("8_kqya4")]
visible = false

[connection signal="enemy_hit" from="NavigationRegion3D/Gostek" to="GridContainer/Viewport_container_player1/Viewport_player1/HUD" method="_on_enemy_hit"]
[connection signal="player_hit" from="GridContainer/Viewport_container_player2/Viewport_player2/Player2" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_player_2_player_hit"]
[connection signal="body_entered" from="Collectibles/Collectible" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_collectible_body_entered"]
[connection signal="body_entered" from="Collectibles/Collectible2" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_collectible_body_entered"]

[editable path="NavigationRegion3D/Gostek"]
[editable path="NavigationRegion3D/Gostek/MonsterAnimation"]
[editable path="GridContainer/Viewport_container_player1/Viewport_player1/Player1"]
[editable path="GridContainer/Viewport_container_player1/Viewport_player1/Player1/player_shooter"]
[editable path="GridContainer/Viewport_container_player1/Viewport_player1/Player1/Head/Gun"]
