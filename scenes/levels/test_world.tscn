[gd_scene load_steps=14 format=3 uid="uid://dy4q4lk1onlnd"]

[ext_resource type="PackedScene" uid="uid://batnu0uma6vhk" path="res://scenes/npcs/fake_npc/gostek.tscn" id="1_7c366"]
[ext_resource type="Script" path="res://scenes/levels/viewport_container_player_1.gd" id="2_ho4vq"]
[ext_resource type="PackedScene" uid="uid://dwullwuqebjtc" path="res://scenes/players/player1/player.tscn" id="3_dubqp"]
[ext_resource type="PackedScene" uid="uid://dmrwwjnwxvabd" path="res://scenes/ui/hud/hud.tscn" id="4_35d48"]
[ext_resource type="PackedScene" uid="uid://bhw4djmtivvo2" path="res://scenes/npcs/citizen/citizen.tscn" id="4_ho4vq"]
[ext_resource type="PackedScene" uid="uid://8kdpemwib222" path="res://scenes/players/player2/player_2.tscn" id="5_m2j1u"]
[ext_resource type="PackedScene" uid="uid://cendlct4ehhly" path="res://scenes/enviroment/landmine/landmine.tscn" id="6_k4tkr"]
[ext_resource type="PackedScene" uid="uid://bft4ip0s201gd" path="res://scenes/enviroment/collectible/collectible.tscn" id="7_junah"]
[ext_resource type="PackedScene" uid="uid://14ts8ibs7115" path="res://scenes/ui/menu/pause_menu.tscn" id="8_kqya4"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_xqnsq"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_tsias"]
sky_material = SubResource("ProceduralSkyMaterial_xqnsq")

[sub_resource type="Environment" id="Environment_7k8c1"]
background_mode = 2
sky = SubResource("Sky_tsias")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_0lift"]
vertices = PackedVector3Array(-6, 0.4995, -14, -5.25, 0.4995, -14.25, -5.25, 0.4995, -15.5, -15.5, 0.4995, -15.5, -5.25, 0.4995, -10.25, -5.25, 0.4995, -13, -6, 0.4995, -13.25, -6.25, 0.4995, -10, -15.5, 0.4995, -5.75, -6.25, 0.4995, -6.25, -5.75, 0.4995, -6, -4.75, 0.4995, -14, -4.75, 0.4995, -13.25, -2.25, 0.4995, -10, 15.5, 0.4995, -15.5, 11.5, 0.4995, -15, 10.75, 0.4995, -13.75, 10.5, 0.4995, -14.75, 11.75, 0.4995, -14, -2.25, 0.4995, -6.25, -4.5, 0.4995, 15.5, 15.5, 0.4995, 15.5, -4.5, 0.4995, -6, -5.25, 5.2495, -9.25, -5.25, 5.2495, -7, -3.25, 5.2495, -7, -3.25, 5.2495, -9.25, -5, 0.4995, -9, -5, 0.4995, -7.25, -3.5, 0.4995, -7.25, -3.5, 0.4995, -9, -15.5, 0.4995, 15.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(7, 9, 8), PackedInt32Array(6, 7, 0), PackedInt32Array(0, 7, 3), PackedInt32Array(3, 7, 8), PackedInt32Array(9, 10, 8), PackedInt32Array(11, 1, 2), PackedInt32Array(5, 12, 4), PackedInt32Array(4, 12, 13), PackedInt32Array(15, 2, 14), PackedInt32Array(13, 12, 11), PackedInt32Array(11, 2, 13), PackedInt32Array(13, 2, 17), PackedInt32Array(13, 17, 16), PackedInt32Array(18, 15, 14), PackedInt32Array(16, 18, 13), PackedInt32Array(13, 18, 19), PackedInt32Array(18, 14, 19), PackedInt32Array(19, 14, 20), PackedInt32Array(20, 14, 21), PackedInt32Array(20, 22, 19), PackedInt32Array(15, 17, 2), PackedInt32Array(26, 25, 23), PackedInt32Array(23, 25, 24), PackedInt32Array(30, 29, 27), PackedInt32Array(27, 29, 28), PackedInt32Array(10, 22, 8), PackedInt32Array(8, 22, 31), PackedInt32Array(31, 22, 20)]
agent_radius = 0.4

[node name="TestWorld" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_7k8c1")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_0lift")

[node name="CSGBox3D" type="CSGBox3D" parent="NavigationRegion3D"]
use_collision = true
collision_layer = 2
size = Vector3(32, 0.001, 32)

[node name="Gostek" parent="NavigationRegion3D" instance=ExtResource("1_7c366")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.072009, 1.2014427, -14.306542)
player_path = NodePath("../../GridContainer/Viewport_container_player2/Viewport_player2/Player2")

[node name="Skeleton3D" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002" index="0"]
bones/1/rotation = Quaternion(-0.045335066, -0.0017048428, 0.0015932126, 0.99896914)
bones/2/rotation = Quaternion(0.0015292095, -0.020225387, 0.0024137404, 0.9997914)
bones/3/rotation = Quaternion(0.0013888445, -0.020181866, 0.002582277, 0.9997921)
bones/4/rotation = Quaternion(0.014578493, 0.018023262, -0.014151858, 0.99963117)
bones/5/rotation = Quaternion(0.022367045, 0.002758295, 0.023205262, 0.99947673)
bones/7/rotation = Quaternion(-0.46417132, -0.5272042, 0.51578087, -0.49048012)
bones/8/rotation = Quaternion(0.59898674, 0.09911372, 0.007900373, 0.79456216)
bones/9/rotation = Quaternion(0.034739807, 0.0005873835, 0.26572034, 0.9634239)
bones/10/rotation = Quaternion(0.101863265, 0.9235847, 0.110704705, -0.35264686)
bones/11/rotation = Quaternion(-0.048372258, -0.12994057, -0.43930206, 0.887575)
bones/12/rotation = Quaternion(-0.048597846, 0.003466227, 0.488916, 0.8709693)
bones/13/rotation = Quaternion(0.014894736, -0.016609635, -0.023645483, 0.9994714)
bones/15/rotation = Quaternion(-0.17653707, -0.12265712, -0.08587725, 0.97283864)
bones/16/rotation = Quaternion(-0.22366832, -0.009414392, 0.043614104, 0.9736435)
bones/17/rotation = Quaternion(-0.05286073, 0.0042157457, 0.005213233, 0.99857944)
bones/19/rotation = Quaternion(0.5012259, -0.50125086, 0.5035453, 0.49392563)
bones/20/rotation = Quaternion(0.5621158, -0.12924756, -0.115177415, 0.80873686)
bones/21/rotation = Quaternion(0.030236293, -0.00061102636, -0.2319045, 0.97226834)
bones/22/rotation = Quaternion(-0.11301363, 0.9028597, 0.038312793, 0.41304284)
bones/23/rotation = Quaternion(-0.12515767, 0.0020902304, 0.37210247, 0.9197124)
bones/24/rotation = Quaternion(-0.02709925, -0.013239818, -0.32331443, 0.9458108)
bones/25/rotation = Quaternion(0.026229467, 0.023651078, -0.0075586485, 0.99934757)
bones/27/rotation = Quaternion(-0.11317913, 0.06057342, -0.0031712845, 0.9917214)
bones/28/rotation = Quaternion(-0.24907614, -0.008982196, 0.16766438, 0.95381814)
bones/29/rotation = Quaternion(-0.060694907, 0.0059645856, 0.049307156, 0.99691993)
bones/31/rotation = Quaternion(0.04888279, 0.07784402, 0.99522924, -0.03270468)
bones/32/rotation = Quaternion(-0.20093016, -0.08347874, 0.014600526, 0.9759331)
bones/33/rotation = Quaternion(0.5304256, 0.03474034, -0.064466245, 0.8445626)
bones/34/rotation = Quaternion(0.32789204, 0.07533268, -0.025753617, 0.94135463)
bones/36/rotation = Quaternion(-0.11043075, 0.10164309, 0.9876272, 0.045455895)
bones/37/rotation = Quaternion(-0.20758574, 0.038044475, -0.0005126686, 0.9774767)
bones/38/rotation = Quaternion(0.516538, -0.03997001, 0.049810745, 0.8538793)
bones/39/rotation = Quaternion(0.3267555, -0.07471581, 0.025773676, 0.9417984)

[node name="Head" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="2"]
transform = Transform3D(0.99848235, -0.035341494, -0.04223647, 0.041844703, -0.0117523335, 0.99905497, -0.035804465, -0.999306, -0.010255661, -0.1536015, -2.5198116, -83.00829)

[node name="Torso" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="3"]
transform = Transform3D(0.9999891, -0.0030285614, -0.0035506268, 0.0032617135, -0.09058208, 0.9958836, -0.0033377183, -0.9958843, -0.09057122, 0, -1.1473308, -55.17752)

[node name="LeftArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="4"]
transform = Transform3D(0.120215066, 0.32956815, -0.936447, -0.9912835, -0.011362642, -0.13125342, -0.053897478, 0.94406307, 0.3253296, 10.76491, -2.8380914, -76.79466)

[node name="LeftForeArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="5"]
transform = Transform3D(0.25576314, 0.15771076, -0.95378834, -0.859392, 0.4889416, -0.14960262, 0.44275302, 0.8579407, 0.26058877, 16.245296, -3.0270405, -61.095837)

[node name="LeftHand" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="6"]
transform = Transform3D(-0.8122889, 0.09214912, 0.5759295, 0.5808075, 0.21816331, 0.78426194, -0.053377733, 0.9715512, -0.23073284, 19.615734, 7.422147, -42.760765)

[node name="RightArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="7"]
transform = Transform3D(0.2437847, -0.32192594, 0.91484016, 0.96981776, 0.085541986, -0.2283334, -0.004750766, 0.94289243, 0.3330633, -11.080827, -4.078098, -76.056564)

[node name="RightForeArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="8"]
transform = Transform3D(0.35100386, -0.12273842, 0.92829484, 0.82985663, 0.49999544, -0.24767387, -0.43374398, 0.8572863, 0.27735564, -16.43006, -2.6567018, -60.38913)

[node name="RightHand" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="9"]
transform = Transform3D(-0.9015073, -0.22442484, -0.3700243, -0.42484435, 0.29612926, 0.85546166, -0.082411915, 0.92840755, -0.36230826, -19.052029, 8.024329, -42.075554)

[node name="LeftUpLeg" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="10"]
transform = Transform3D(-0.99308205, 0.07270777, 0.09220744, 0.10239091, 0.15174791, 0.98310155, 0.05748685, 0.9857416, -0.15814269, 5.9848366, -0.46329382, -46.648655)

[node name="LeftLeg" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="11"]
transform = Transform3D(-0.95982337, 0.025404837, 0.27945372, 0.26475304, -0.24801065, 0.931878, 0.092981756, 0.96842414, 0.23132041, 8.102392, 3.9562428, -17.939722)

[node name="LeftFoot" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="12"]
transform = Transform3D(-0.9868689, 0.120134264, 0.1079727, 0.16136578, 0.76294035, 0.6260053, -0.007171955, 0.6352082, -0.7723074, 8.85979, -3.4377239, 10.932005)

[node name="BoneAttachment3D4" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="13"]
transform = Transform3D(-0.97147775, -0.11223601, -0.20888826, -0.2273694, 0.19073151, 0.9549475, -0.06733792, 0.9752048, -0.21081044, -5.9848366, -0.35910308, -46.648655)

[node name="BoneAttachment3D5" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="14"]
transform = Transform3D(-0.9512882, -0.003412962, -0.30828476, -0.300736, -0.20991752, 0.9303186, -0.06788951, 0.97771305, 0.19866559, -9.253663, 5.195871, -18.24623)

[node name="BoneAttachment3D6" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="15"]
transform = Transform3D(-0.9805845, -0.15209033, -0.123785175, -0.19609606, 0.75809115, 0.6219679, -0.0007548742, 0.6341657, -0.7731966, -9.3554325, -1.0635986, 10.907913)

[node name="Citizen" parent="NavigationRegion3D" instance=ExtResource("4_ho4vq")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.402817, 1.4587977, -13.740158)

[node name="CSGBox3D2" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.265442, 2.4046206, -8.134556)
use_collision = true
collision_layer = 2
size = Vector3(2.7626953, 4.767517, 2.9682617)

[node name="CSGBox3D3" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.4371958, 0.43066406, 4.4706244)
use_collision = true
collision_layer = 2
size = Vector3(2.819336, 1.8613281, 2.4384766)

[node name="GridContainer" type="GridContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
columns = 2

[node name="Viewport_container_player1" type="SubViewportContainer" parent="GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true
script = ExtResource("2_ho4vq")

[node name="Viewport_player1" type="SubViewport" parent="GridContainer/Viewport_container_player1"]
handle_input_locally = false
size = Vector2i(574, 648)
render_target_update_mode = 4

[node name="Player1" parent="GridContainer/Viewport_container_player1/Viewport_player1" instance=ExtResource("3_dubqp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.4905853, 1.4881334, -9.479806)

[node name="HUD" parent="GridContainer/Viewport_container_player1/Viewport_player1" instance=ExtResource("4_35d48")]

[node name="Viewport_container_player2" type="SubViewportContainer" parent="GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true

[node name="Viewport_player2" type="SubViewport" parent="GridContainer/Viewport_container_player2"]
handle_input_locally = false
size = Vector2i(574, 648)
render_target_update_mode = 4

[node name="Player2" parent="GridContainer/Viewport_container_player2/Viewport_player2" instance=ExtResource("5_m2j1u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.4905853, 2.8576286, 4.693651)

[node name="HUD" parent="GridContainer/Viewport_container_player2/Viewport_player2" instance=ExtResource("4_35d48")]
player_hud_type = 1

[node name="LandMine" parent="." instance=ExtResource("6_k4tkr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13, 0.5048461, -4)

[node name="Collectibles" type="Node3D" parent="."]

[node name="Collectible" parent="Collectibles" instance=ExtResource("7_junah")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.757, 1.2, -4.916)

[node name="Collectible2" parent="Collectibles" instance=ExtResource("7_junah")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.9259977, 1.2, -4.916)

[node name="PauseMenu" parent="." instance=ExtResource("8_kqya4")]
visible = false

[connection signal="enemy_hit" from="NavigationRegion3D/Gostek" to="GridContainer/Viewport_container_player1/Viewport_player1/HUD" method="_on_enemy_hit"]
[connection signal="player_hit" from="GridContainer/Viewport_container_player2/Viewport_player2/Player2" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_player_2_player_hit"]
[connection signal="body_entered" from="Collectibles/Collectible" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_collectible_body_entered"]
[connection signal="body_entered" from="Collectibles/Collectible2" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_collectible_body_entered"]

[editable path="NavigationRegion3D/Gostek"]
[editable path="NavigationRegion3D/Gostek/MonsterAnimation"]
[editable path="GridContainer/Viewport_container_player1/Viewport_player1/Player1"]
[editable path="GridContainer/Viewport_container_player1/Viewport_player1/Player1/player_shooter"]
[editable path="GridContainer/Viewport_container_player1/Viewport_player1/Player1/Head/Gun"]
