[gd_scene load_steps=13 format=3 uid="uid://dy4q4lk1onlnd"]

[ext_resource type="PackedScene" uid="uid://batnu0uma6vhk" path="res://scenes/npcs/fake_npc/gostek.tscn" id="1_7c366"]
[ext_resource type="Script" path="res://scenes/levels/viewport_container_player_1.gd" id="2_ho4vq"]
[ext_resource type="PackedScene" uid="uid://dwullwuqebjtc" path="res://scenes/players/player1/player.tscn" id="3_dubqp"]
[ext_resource type="PackedScene" uid="uid://dmrwwjnwxvabd" path="res://scenes/ui/hud/hud.tscn" id="4_35d48"]
[ext_resource type="PackedScene" uid="uid://8kdpemwib222" path="res://scenes/players/player2/player_2.tscn" id="5_m2j1u"]
[ext_resource type="PackedScene" uid="uid://cendlct4ehhly" path="res://scenes/enviroment/landmine/landmine.tscn" id="6_k4tkr"]
[ext_resource type="PackedScene" uid="uid://bft4ip0s201gd" path="res://scenes/enviroment/collectible/collectible.tscn" id="7_junah"]
[ext_resource type="PackedScene" uid="uid://14ts8ibs7115" path="res://scenes/ui/menu/pause_menu.tscn" id="8_kqya4"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_xqnsq"]
sky_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)
ground_horizon_color = Color(0.66224277, 0.6717428, 0.6867428, 1)

[sub_resource type="Sky" id="Sky_tsias"]
sky_material = SubResource("ProceduralSkyMaterial_xqnsq")

[sub_resource type="Environment" id="Environment_7k8c1"]
background_mode = 2
sky = SubResource("Sky_tsias")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="NavigationMesh" id="NavigationMesh_0lift"]
vertices = PackedVector3Array(10.75, 0.4995, -13.75, 10.5, 0.4995, -14.75, -15.5, 0.4995, -15.5, -15.5, 0.4995, 15.5, 15.5, 0.4995, 15.5, 11.5, 0.4995, -15, 15.5, 0.4995, -15.5, 11.75, 0.4995, -14)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 0, 4), PackedInt32Array(5, 1, 2), PackedInt32Array(5, 2, 6), PackedInt32Array(7, 5, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(0, 7, 4)]
agent_radius = 0.4

[node name="TestWorld" type="Node3D"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.8660254, -0.43301278, 0.25, 0, 0.49999997, 0.86602545, -0.50000006, 0.75, -0.43301266, 0, 0, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_7k8c1")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_0lift")

[node name="CSGBox3D" type="CSGBox3D" parent="NavigationRegion3D"]
use_collision = true
collision_layer = 2
size = Vector3(32, 0.001, 32)

[node name="Gostek" parent="NavigationRegion3D" instance=ExtResource("1_7c366")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 11.072009, 1.2014427, -14.306542)
player_path = NodePath("../../GridContainer/Viewport_container_player2/Viewport_player2/Player2")

[node name="Skeleton3D" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002" index="0"]
bones/1/rotation = Quaternion(-0.018564224, 0.06640888, -0.013684081, 0.99752593)
bones/2/rotation = Quaternion(0.010617408, 0.018442895, 0.0008421495, 0.99977326)
bones/3/rotation = Quaternion(0.010613562, 0.018428188, 0.00096389186, 0.9997734)
bones/4/rotation = Quaternion(0.034856807, -0.003191453, 0.0054943874, 0.9993721)
bones/5/rotation = Quaternion(-0.033432294, 0.014797914, -0.031338204, 0.99884)
bones/7/rotation = Quaternion(-0.583553, -0.3991675, 0.60371983, -0.3683119)
bones/8/rotation = Quaternion(0.46770626, 0.04731667, -0.16780849, 0.86651736)
bones/9/rotation = Quaternion(0.004457644, 0.0006093007, 0.03409384, 0.9994086)
bones/10/rotation = Quaternion(0.035540286, 0.9500389, 0.0053810924, -0.3100549)
bones/12/rotation = Quaternion(-0.1526347, -0.0013055094, 0.52517736, 0.83719164)
bones/13/rotation = Quaternion(0.21541357, -0.07275308, -0.15396331, 0.9615609)
bones/15/rotation = Quaternion(-0.19815677, -0.1283287, -0.08001448, 0.9684335)
bones/16/rotation = Quaternion(-0.25092292, -0.009929061, 0.037193812, 0.96724135)
bones/17/rotation = Quaternion(-0.15322733, 0.00874935, -0.0028770617, 0.98814803)
bones/19/rotation = Quaternion(0.5951175, -0.39044467, 0.59463847, 0.37388954)
bones/20/rotation = Quaternion(0.35426405, 0.023688328, -0.14399984, 0.92368823)
bones/21/rotation = Quaternion(0.025291381, -0.00061629905, -0.19397831, 0.9806796)
bones/22/rotation = Quaternion(0.054990724, 0.90196747, -0.07674844, 0.4213554)
bones/24/rotation = Quaternion(-0.18281089, 0.014603547, -0.5164992, 0.8364183)
bones/25/rotation = Quaternion(0.20903714, -0.018931024, 0.046936523, 0.97659725)
bones/27/rotation = Quaternion(-0.16591053, 0.068340525, 0.07312902, 0.9810482)
bones/28/rotation = Quaternion(-0.30691856, -0.009920423, 0.2137023, 0.92738014)
bones/29/rotation = Quaternion(-0.13889718, 0.008660908, 0.09823436, 0.98538446)
bones/31/rotation = Quaternion(0.02209886, 0.33155027, 0.9429625, 0.020194286)
bones/32/rotation = Quaternion(-0.16029002, -0.05920628, 0.0130075915, 0.98520684)
bones/33/rotation = Quaternion(0.52206993, 0.006376115, -0.07820824, 0.8492855)
bones/34/rotation = Quaternion(0.32214123, 0.074235044, -0.026496954, 0.9434046)
bones/36/rotation = Quaternion(-0.12338072, -0.10069168, 0.98516434, 0.06395123)
bones/37/rotation = Quaternion(-0.21759957, -0.042864405, 0.032510027, 0.97455436)
bones/38/rotation = Quaternion(0.6290704, -0.056818545, 0.056629695, 0.773198)
bones/39/rotation = Quaternion(0.42186114, -0.0927657, 0.013186632, 0.9018058)

[node name="Head" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="2"]
transform = Transform3D(0.9703035, 0.07862455, 0.22875576, -0.22910637, -0.004654236, 0.97339016, 0.07759706, -0.9968933, 0.0134973675, 0.94547576, -0.2073648, -82.95294)

[node name="Torso" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="3"]
transform = Transform3D(0.9908052, 0.024834791, 0.13299721, -0.13198109, -0.038854074, 0.9904904, 0.029766109, -0.9989362, -0.0352191, 0, -1.1473308, -55.17752)

[node name="LeftArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="4"]
transform = Transform3D(-0.3470087, 0.016033828, -0.93772465, -0.869295, -0.3807756, 0.31517527, -0.35200936, 0.9245282, 0.14607042, 10.468054, -4.054069, -73.13422)

[node name="LeftForeArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="5"]
transform = Transform3D(-0.34425196, 0.031247644, -0.93835694, -0.8935124, -0.3178185, 0.31721646, -0.2883151, 0.94763607, 0.13732965, 10.734678, -10.385985, -57.76024)

[node name="LeftHand" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="6"]
transform = Transform3D(-0.27397212, 0.01785718, 0.9615714, 0.88606215, -0.3840646, 0.25959036, 0.37394127, 0.9231328, 0.08940069, 11.4024725, -17.178095, -37.508286)

[node name="RightArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="7"]
transform = Transform3D(0.35444194, -0.34140712, 0.87052405, 0.9126327, 0.32905614, -0.24253586, -0.2036479, 0.8804337, 0.4282105, -9.638674, 0.3639922, -73.653404)

[node name="RightForeArm" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="8"]
transform = Transform3D(0.45018148, -0.13704652, 0.88235754, 0.7208348, 0.6389757, -0.2685276, -0.52700424, 0.75692034, 0.3864429, -15.311613, 5.8317018, -59.02381)

[node name="RightHand" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="9"]
transform = Transform3D(-0.9704654, -0.14210114, -0.1949479, -0.2320876, 0.770445, 0.5937592, 0.06582272, 0.6214675, -0.7806701, -18.239237, 19.481657, -42.8543)

[node name="LeftUpLeg" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="10"]
transform = Transform3D(-0.9982077, -0.02343114, 0.05506763, 0.028285952, 0.6261714, 0.7791721, -0.052738678, 0.7793331, -0.62438637, 5.9848366, -0.46329382, -46.648655)

[node name="LeftLeg" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="11"]
transform = Transform3D(-0.98572254, -0.033058364, 0.16510181, 0.14366181, 0.346303, 0.9270574, -0.0878223, 0.9375398, -0.3366095, 5.3024235, 17.773443, -23.951206)

[node name="LeftFoot" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="12"]
transform = Transform3D(-0.98468286, -0.0058983266, 0.17425603, 0.012450464, 0.9944973, 0.10401696, -0.17391075, 0.10459301, -0.9791907, 4.3168516, 28.097809, 3.9997635)

[node name="BoneAttachment3D4" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="13"]
transform = Transform3D(-0.9613751, -0.10115811, -0.25597924, -0.23022185, -0.21417639, 0.9492768, -0.15085177, 0.97154295, 0.18261498, -5.9848366, -0.35910308, -46.648655)

[node name="BoneAttachment3D5" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="14"]
transform = Transform3D(-0.9818721, 0.060900055, -0.17949714, -0.18057711, -0.5884058, 0.7881438, -0.05761918, 0.80626917, 0.58873624, -8.931024, -6.5968995, -18.35288)

[node name="BoneAttachment3D6" parent="NavigationRegion3D/Gostek/MonsterAnimation/Armature_002/Skeleton3D" index="15"]
transform = Transform3D(-0.9968152, -0.0049744397, -0.07959388, -0.062314987, 0.6714175, 0.7384547, 0.049767274, 0.74106276, -0.669589, -7.115062, -24.1424, 5.689026)

[node name="AnimationTree" parent="NavigationRegion3D/Gostek" index="3"]
active = false

[node name="GridContainer" type="GridContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
columns = 2

[node name="Viewport_container_player1" type="SubViewportContainer" parent="GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true
script = ExtResource("2_ho4vq")

[node name="Viewport_player1" type="SubViewport" parent="GridContainer/Viewport_container_player1"]
handle_input_locally = false
size = Vector2i(574, 648)
render_target_update_mode = 4

[node name="Player1" parent="GridContainer/Viewport_container_player1/Viewport_player1" instance=ExtResource("3_dubqp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.4905853, 1.4881334, -9.479806)

[node name="HUD" parent="GridContainer/Viewport_container_player1/Viewport_player1" instance=ExtResource("4_35d48")]

[node name="Viewport_container_player2" type="SubViewportContainer" parent="GridContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
stretch = true

[node name="Viewport_player2" type="SubViewport" parent="GridContainer/Viewport_container_player2"]
handle_input_locally = false
size = Vector2i(574, 648)
render_target_update_mode = 4

[node name="Player2" parent="GridContainer/Viewport_container_player2/Viewport_player2" instance=ExtResource("5_m2j1u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.4905853, 1.6713071, -1.6846259)

[node name="HUD" parent="GridContainer/Viewport_container_player2/Viewport_player2" instance=ExtResource("4_35d48")]
player_hud_type = 1

[node name="LandMine" parent="." instance=ExtResource("6_k4tkr")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13, 0.5048461, -4)

[node name="Collectibles" type="Node3D" parent="."]

[node name="Collectible" parent="Collectibles" instance=ExtResource("7_junah")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.757, 1.2, -4.916)

[node name="Collectible2" parent="Collectibles" instance=ExtResource("7_junah")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.9259977, 1.2, -4.916)

[node name="PauseMenu" parent="." instance=ExtResource("8_kqya4")]
visible = false

[connection signal="enemy_hit" from="NavigationRegion3D/Gostek" to="GridContainer/Viewport_container_player1/Viewport_player1/HUD" method="_on_enemy_hit"]
[connection signal="player_hit" from="GridContainer/Viewport_container_player2/Viewport_player2/Player2" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_player_2_player_hit"]
[connection signal="body_entered" from="Collectibles/Collectible" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_collectible_body_entered"]
[connection signal="body_entered" from="Collectibles/Collectible2" to="GridContainer/Viewport_container_player2/Viewport_player2/HUD" method="_on_collectible_body_entered"]

[editable path="NavigationRegion3D/Gostek"]
[editable path="NavigationRegion3D/Gostek/MonsterAnimation"]
